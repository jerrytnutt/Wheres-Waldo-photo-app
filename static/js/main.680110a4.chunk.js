(this["webpackJsonpwaldo-app"]=this["webpackJsonpwaldo-app"]||[]).push([[0],{26:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a,c=n(7),r=n.n(c),s=n(21),o=n.n(s),i=(n(26),n(15)),l=n(10),u=n(12);n(31);u.a.initializeApp({apiKey:"AIzaSyCktOKStiyKc-JeGHlmB4brK5d7oxswBFc",authDomain:"waldoapp.firebaseapp.com",projectId:"waldoapp",storageBucket:"waldoapp.appspot.com",messagingSenderId:"1016805756033",appId:"1:1016805756033:web:9657afd46f0d0067fe5180",measurementId:"G-EMRJ5QSVPS"}),u.a.auth().signOut(),u.a.auth().signInAnonymously().then((function(){u.a.auth().onAuthStateChanged((function(e){e?(console.log(e),a=e.uid):console.log("Sign Out")})),console.log("sign in")})).catch((function(e){console.log(e)}));var j=u.a.storage(),d=(new FileReader,u.a.database()),b=n(4),h=function(e){var t=e.characterArray,n=e.missBox,r=e.seconds,s=e.setSeconds;Object(c.useEffect)((function(){r>=0&&t.length>0?(console.log(a),setTimeout((function(){d.ref("Time/"+a).set({clock:r}),s(r+1)}),1e3)):(s(0),d.ref("Time/"+a).set({clock:0}))}));var o="miss";return n&&(o="miss-active"),Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)("div",{className:o,children:"Sorry, try again!"}),Object(b.jsx)("div",{className:"imageContainer",children:t.map((function(e){return Object(b.jsxs)("div",{className:"holder",children:[Object(b.jsx)("img",{className:"charImage",src:e.image,alt:""}),Object(b.jsx)("p",{children:e.name})]},e.Location.x1)}))}),Object(b.jsx)("div",{children:t.length>0?Object(b.jsx)("div",{className:"timer",children:r}):null})]})},m=function(e){var t=e.recieveCharacterCoord,n=e.imageUrl,a=e.characterArray,r=Object(c.useState)([0,0]),s=Object(l.a)(r,2),o=s[0],i=s[1],u=Object(c.useState)("none"),j=Object(l.a)(u,2),d=j[0],h=j[1],m=Object(c.useState)(),f=Object(l.a)(m,2),O=f[0],p=f[1];return Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{src:n,onClick:function(e){return function(e){if("block"===d)return h("none");var t=e.nativeEvent.offsetX,n=e.nativeEvent.offsetY;return i([e.clientY,e.clientX]),p([t,n]),h("block")}(e)},alt:""}),Object(b.jsx)("div",{className:"circle",style:{top:o[0]-55,left:o[1]-55,display:d}}),Object(b.jsx)("div",{className:"selectionList",style:{top:o[0]+55,left:o[1]+55,display:d},children:a.map((function(e){var n=e.name;return Object(b.jsx)("div",{onClick:function(){return t(O,n),h("none")},children:e.name},e.Location.x1)}))})]})},f=function(e){var t=e.getBackgroundData,n=e.leaderBoard,a=e.setleaderBoard,r=e.score,s=e.resetGame,o=Object(c.useState)(!0),u=Object(l.a)(o,2),h=u[0],m=u[1],f=Object(c.useState)(""),O=Object(l.a)(f,2),p=O[0],g=O[1],v=Object(c.useState)([]),x=Object(l.a)(v,2),y=x[0],S=x[1],k=Object(c.useState)([]),w=Object(l.a)(k,2),C=w[0],L=w[1],N=Object(c.useState)(null),B=Object(l.a)(N,2),I=B[0],A=B[1],D=function(e){if(A(e),""!==p)return m(!1),t(e)};Object(c.useEffect)((function(){j.refFromURL("gs://waldoapp.appspot.com/smallone.jpg").getDownloadURL().then((function(e){S(e)})),j.refFromURL("gs://waldoapp.appspot.com/smallone-part2.jpg").getDownloadURL().then((function(e){L(e)}));new Promise((function(e){d.ref("Leaderboard").once("value").then((function(t){var n=Object.keys(t.val()).map((function(e){return t.val()[e]}));return a(n),e(n)}))}))}),[a]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:h?Object(b.jsxs)("div",{className:"startDisplay",children:[Object(b.jsx)("h1",{children:"Can you find all the hidden characters?"}),Object(b.jsx)("h2",{children:"Enter your name and select a level to begin..."}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();for(var a=0;a<n.length;a++)if(n[a].name===p)return alert("Sorry, that username already exists"),g(""),null;return null===I?(alert("Please select a level"),null):(m(!1),t(I))},children:[Object(b.jsx)("input",{onChange:function(e){return g(e.target.value)},value:p}),Object(b.jsx)("button",{disabled:!p,name:"sam",type:"submit",children:"Start Game"})]}),Object(b.jsxs)("div",{className:"img",children:[Object(b.jsxs)("div",{className:"levelImg",children:[Object(b.jsx)("button",{onClick:function(e){D("left")},children:"Level 1"}),Object(b.jsx)("img",{src:y,alt:""})]}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 ",Object(b.jsxs)("div",{className:"levelImg",children:[Object(b.jsx)("button",{onClick:function(e){D("right")},children:"Level 2"}),Object(b.jsx)("img",{src:C,alt:""})]})]}),Object(b.jsxs)("p",{children:["Art by ",Object(b.jsx)("a",{href:"https://www.artstation.com/artwork/Z5VrOm",children:"Egor Klyuchnyk"})]})]}):null}),Object(b.jsx)("div",{children:0!==n.length&&0!==r?Object(b.jsxs)("div",{className:"leaderDisplay",children:[Object(b.jsx)("h1",{children:"Leaderboard"}),Object(b.jsx)("button",{onClick:function(){if(""===p)return null;var e=Object(i.a)(n);e.push({name:p,score:r}),e=e.sort((function(e,t){return e.score-t.score})),d.ref("Leaderboard").set(e),a(e),g(""),A(null)},children:"Add Name"}),Object(b.jsx)("button",{onClick:function(){return m(!0),s()},children:"Reset Game"}),n.map((function(e){var t=n.indexOf(e);return Object(b.jsxs)("div",{className:"ranking",children:[Object(b.jsxs)("p",{className:"left",children:[t+1,"."]}),Object(b.jsx)("p",{className:"left",children:e.name}),Object(b.jsx)("p",{className:"score",children:e.score})]},t)}))]}):null})]})};n(33);var O=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("Characters"),s=Object(l.a)(r,2),o=s[0],u=s[1],O=Object(c.useState)(null),p=Object(l.a)(O,2),g=p[0],v=p[1],x=Object(c.useState)(!1),y=Object(l.a)(x,2),S=y[0],k=y[1],w=Object(c.useState)([]),C=Object(l.a)(w,2),L=C[0],N=C[1],B=Object(c.useState)(0),I=Object(l.a)(B,2),A=I[0],D=I[1],E=Object(c.useState)(!1),F=Object(l.a)(E,2),R=F[0],U=F[1],P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n){d.ref(e).once("value").then((function(c){var r=Object.keys(c.val()).map((function(e){return c.val()[e].name===t&&(t=c.val()[e]),c.val()[e]}));return"Leaderboard"===e?n(r):null===t?(a(r),n(r)):n(t)}))}))};return Object(c.useEffect)((function(){document.title="Photo Tagging"}),[]),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(h,{characterArray:n,missBox:R,setmissBox:U,seconds:S,setSeconds:k}),Object(b.jsx)(f,{getBackgroundData:function(e){var t;return"left"===e?(e="gs://waldoapp.appspot.com/egor-klyuchnyk-character.jpg",t="Characters"):(e="gs://waldoapp.appspot.com/egor-klyuchnyk-character-part2.jpg",t="Characters-part2"),j.refFromURL(e).getDownloadURL().then((function(e){v(e)})),u(t),P(t)},getCharacterData:P,leaderBoard:L,setleaderBoard:N,score:A,resetGame:function(){return N([]),a([]),u(""),v(null)}}),Object(b.jsx)(m,{imageUrl:g,recieveCharacterCoord:function(e,t){P(o,t).then((function(c){var r=c.Location,s=e[0],o=e[1],l=n.findIndex((function(e){return e.name===c.name})),u=Object(i.a)(n);return s>=r.x1&&s<=r.x2&&o>=r.y1&&o<=r.y2?(u.splice(l,1),a(u),0===u.length&&P("Leaderboard").then((function(e){return e=e.sort((function(e,t){return e.score-t.score})),v(null),D(S.toString()),N(e)})),n):(U(!0),setTimeout((function(){return U(!1)}),3e3),t)}))},characterArray:n})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root")),p()}},[[34,1,2]]]);
//# sourceMappingURL=main.680110a4.chunk.js.map