(this["webpackJsonpwaldo-app"]=this["webpackJsonpwaldo-app"]||[]).push([[0],{25:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n.n(a),r=n(20),s=n.n(r),i=(n(25),n(14)),l=n(10),o=n(15);o.a.initializeApp({apiKey:"AIzaSyCktOKStiyKc-JeGHlmB4brK5d7oxswBFc",authDomain:"waldoapp.firebaseapp.com",projectId:"waldoapp",storageBucket:"waldoapp.appspot.com",messagingSenderId:"1016805756033",appId:"1:1016805756033:web:9657afd46f0d0067fe5180",measurementId:"G-EMRJ5QSVPS"});var u=o.a.storage(),j=(new FileReader,o.a.database()),d=n(4),b=function(e){var t=e.characterArray,n=e.missBox,c=e.seconds,r=e.setSeconds;Object(a.useEffect)((function(){c>=0&&t.length>0?setTimeout((function(){j.ref("Time").update({clock:c}),r(c+1)}),1e3):(r(0),j.ref("Time").update({clock:0}))}),[c,r,t]);var s="miss";return n&&(s="miss-active"),Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("div",{className:s,children:"Sorry, try again!"}),Object(d.jsx)("div",{className:"imageContainer",children:t.map((function(e){return Object(d.jsxs)("div",{className:"holder",children:[Object(d.jsx)("img",{className:"charImage",src:e.image,alt:""}),Object(d.jsx)("p",{children:e.name})]},e.Location.x1)}))}),Object(d.jsx)("div",{children:t.length>0?Object(d.jsx)("div",{className:"timer",children:c}):null})]})},m=function(e){var t=e.recieveCharacterCoord,n=e.imageUrl,c=e.characterArray,r=Object(a.useState)([0,0]),s=Object(l.a)(r,2),i=s[0],o=s[1],u=Object(a.useState)("none"),j=Object(l.a)(u,2),b=j[0],m=j[1],f=Object(a.useState)(),h=Object(l.a)(f,2),O=h[0],p=h[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{src:n,onClick:function(e){return function(e){if("block"===b)return m("none");var t=e.nativeEvent.offsetX,n=e.nativeEvent.offsetY;return o([e.clientY,e.clientX]),p([t,n]),m("block")}(e)},alt:""}),Object(d.jsx)("div",{className:"circle",style:{top:i[0]-55,left:i[1]-55,display:b}}),Object(d.jsx)("div",{className:"selectionList",style:{top:i[0]+55,left:i[1]+55,display:b},children:c.map((function(e){var n=e.name;return Object(d.jsx)("div",{onClick:function(){return t(O,n),m("none")},children:e.name},e.Location.x1)}))})]})},f=function(e){var t=e.getBackgroundData,n=e.leaderBoard,c=e.setleaderBoard,r=e.score,s=e.resetGame,o=Object(a.useState)(!0),b=Object(l.a)(o,2),m=b[0],f=b[1],h=Object(a.useState)(""),O=Object(l.a)(h,2),p=O[0],v=O[1],g=Object(a.useState)([]),x=Object(l.a)(g,2),y=x[0],S=x[1],k=Object(a.useState)([]),w=Object(l.a)(k,2),C=w[0],L=w[1],N=Object(a.useState)(null),B=Object(l.a)(N,2),D=B[0],I=B[1],A=function(e){if(I(e),""!==p)return f(!1),t(e)};Object(a.useEffect)((function(){u.refFromURL("gs://waldoapp.appspot.com/smallone.jpg").getDownloadURL().then((function(e){S(e)})),u.refFromURL("gs://waldoapp.appspot.com/smallone-part2.jpg").getDownloadURL().then((function(e){L(e)}));new Promise((function(e){j.ref("Leaderboard").once("value").then((function(t){var n=Object.keys(t.val()).map((function(e){return t.val()[e]}));return c(n),e(n)}))}))}),[c]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:m?Object(d.jsxs)("div",{className:"startDisplay",children:[Object(d.jsx)("h1",{children:"Can you find all the hidden characters?"}),Object(d.jsx)("h2",{children:"Enter your name and select a level to begin..."}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault();for(var a=0;a<n.length;a++)if(n[a].name===p)return alert("Sorry, that username already exists"),v(""),null;return null===D?(alert("Please select a level"),null):(f(!1),t(D))},children:[Object(d.jsx)("input",{onChange:function(e){return v(e.target.value)},value:p}),Object(d.jsx)("button",{disabled:!p,name:"sam",type:"submit",children:"Start Game"})]}),Object(d.jsxs)("div",{className:"img",children:[Object(d.jsxs)("div",{className:"levelImg",children:[Object(d.jsx)("button",{onClick:function(e){A("left")},children:"Level 1"}),Object(d.jsx)("img",{src:y,alt:""})]}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 ",Object(d.jsxs)("div",{className:"levelImg",children:[Object(d.jsx)("button",{onClick:function(e){A("right")},children:"Level 2"}),Object(d.jsx)("img",{src:C,alt:""})]})]}),Object(d.jsxs)("p",{children:["Art by ",Object(d.jsx)("a",{href:"https://www.artstation.com/artwork/Z5VrOm",children:"Egor Klyuchnyk"})]})]}):null}),Object(d.jsx)("div",{children:0!==n.length&&0!==r?Object(d.jsxs)("div",{className:"leaderDisplay",children:[Object(d.jsx)("h1",{children:"Leaderboard"}),Object(d.jsx)("button",{onClick:function(){if(""===p)return null;var e=Object(i.a)(n);e.push({name:p,score:r}),e=e.sort((function(e,t){return e.score-t.score})),j.ref("Leaderboard").set(e),c(e),v(""),I(null)},children:"Add Name"}),Object(d.jsx)("button",{onClick:function(){return f(!0),s()},children:"Reset Game"}),n.map((function(e){var t=n.indexOf(e);return Object(d.jsxs)("div",{className:"ranking",children:[Object(d.jsxs)("p",{className:"left",children:[t+1,"."]}),Object(d.jsx)("p",{className:"left",children:e.name}),Object(d.jsx)("p",{className:"score",children:e.score})]},t)}))]}):null})]})};n(32);var h=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)("Characters"),s=Object(l.a)(r,2),o=s[0],h=s[1],O=Object(a.useState)(null),p=Object(l.a)(O,2),v=p[0],g=p[1],x=Object(a.useState)(!1),y=Object(l.a)(x,2),S=y[0],k=y[1],w=Object(a.useState)([]),C=Object(l.a)(w,2),L=C[0],N=C[1],B=Object(a.useState)(0),D=Object(l.a)(B,2),I=D[0],A=D[1],E=Object(a.useState)(!1),F=Object(l.a)(E,2),R=F[0],U=F[1],P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(n){j.ref(e).once("value").then((function(a){var r=Object.keys(a.val()).map((function(e){return a.val()[e].name===t&&(t=a.val()[e]),a.val()[e]}));return"Leaderboard"===e?n(r):null===t?(c(r),n(r)):n(t)}))}))};return Object(a.useEffect)((function(){document.title="Photo Tagging"}),[]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(b,{characterArray:n,missBox:R,setmissBox:U,seconds:S,setSeconds:k}),Object(d.jsx)(f,{getBackgroundData:function(e){var t;return"left"===e?(e="gs://waldoapp.appspot.com/egor-klyuchnyk-character.jpg",t="Characters"):(e="gs://waldoapp.appspot.com/egor-klyuchnyk-character-part2.jpg",t="Characters-part2"),u.refFromURL(e).getDownloadURL().then((function(e){g(e)})),h(t),P(t)},getCharacterData:P,leaderBoard:L,setleaderBoard:N,score:I,resetGame:function(){return N([]),c([]),h(""),g(null)}}),Object(d.jsx)(m,{imageUrl:v,recieveCharacterCoord:function(e,t){P(o,t).then((function(a){var r=a.Location,s=e[0],l=e[1],o=n.findIndex((function(e){return e.name===a.name})),u=Object(i.a)(n);return s>=r.x1&&s<=r.x2&&l>=r.y1&&l<=r.y2?(u.splice(o,1),c(u),0===u.length&&P("Leaderboard").then((function(e){return e=e.sort((function(e,t){return e.score-t.score})),g(null),A(S.toString()),N(e)})),n):(U(!0),setTimeout((function(){return U(!1)}),3e3),t)}))},characterArray:n})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root")),O()}},[[33,1,2]]]);
//# sourceMappingURL=main.5ec25034.chunk.js.map